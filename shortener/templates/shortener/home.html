{% extends 'shortener/base.html' %}

{% block content %}
<div class="url-shortener-container">
    <h2 class="main-title">–°–æ–∫—Ä–∞—Ç–∏—Ç–µ –≤–∞—à—É —Å—Å—ã–ª–∫—É</h2>

    <form method="POST" class="url-form">
        {% csrf_token %}
        {{ form.original_url }}
        <button type="submit" class="btn btn-primary btn-large">–°–æ–∫—Ä–∞—Ç–∏—Ç—å</button>
    </form>

    {% if short_url %}
    <div class="result-box">
        <h4 class="result-title">–í–∞—à–∞ –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞:</h4>
        <div class="input-group result-group">
            <input type="text"
                   value="{{ short_url }}"
                   id="short-url"
                   class="form-control result-input"
                   readonly>
            <button class="btn btn-outline-secondary copy-btn"
                    onclick="copyToClipboard()">
                üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
            </button>
        </div>
        <div class="stats">
            <span class="badge bg-secondary">–ü–µ—Ä–µ—Ö–æ–¥–æ–≤: 0</span>
            <a href="#" class="qr-link">–ü–æ–ª—É—á–∏—Ç—å QR-–∫–æ–¥</a>
        </div>
    </div>
    {% endif %}
</div>

<script>
function copyToClipboard() {
    const input = document.getElementById('short-url');
    input.select();
    document.execCommand('copy');

    // –ö—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ alert
    const notification = document.createElement('div');
    notification.className = 'copy-notification';
    notification.textContent = '‚úì –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!';
    document.body.appendChild(notification);

    setTimeout(() => {
        notification.remove();
    }, 2000);
}
</script>
{% endblock %}